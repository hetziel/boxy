window.addEventListener("load",(e=>{console.log("Boxy is mounted"),sideHeadNav(),bSide(),bMenu(),boxyCode(),copyCode()}));const svg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg>',targetNode=document.body,config={attributes:!0,childList:!0,subtree:!0},callback=(e,t)=>{setColor()},observer=new MutationObserver(callback);function setColor(e,t){if(e&&t)changeColor("color",e,t,!0),changeColor("bg",e,t,!0),changeColor("tx",e,t,!0);else{let e=[];e.primary="blue",e.secondary="gray",e.success="green",e.warning="yellow",e.danger="red",e.info="light-blue",e.light="white",e.dark="dark-gray";for(let t in e)changeColor("color",t,e[t]),changeColor("bg",t,e[t]),changeColor("tx",t,e[t])}}function changeColor(e,t,n,r){document.querySelectorAll("["+e+"]").forEach((function(s){r?s.attributes[e]&&s.attributes[e].value==t&&(s.removeAttribute(e),s.setAttribute(e,n)):s.attributes[e].value==t&&(s.setAttribute("rs",s.attributes[e].value),s.setAttribute(e,n))}))}function sideHeadNav(){document.querySelectorAll("[open-nav]").forEach((e=>{e.addEventListener("click",(function(e){document.querySelector(".b-header [bx-content]").setAttribute("opened","")}))}));let e=0;document.addEventListener("click",(function(t){if(document.querySelector(".b-header [bx-content][opened]")){e++;!t.target.closest("[bx-content][opened]")&&e>1&&(document.querySelector(".b-header [bx-content]").removeAttribute("opened"),e=0)}}))}function bSide(){document.addEventListener("click",(function(e){let t=e.target.closest("[mobile-side]"),n=document.querySelector(".b-side[opened]");t&&(t.parentNode.hasAttribute("opened")?t.parentNode.removeAttribute("opened"):(n&&n.removeAttribute("opened"),t.parentNode.setAttribute("opened",""))),!e.target.closest(".b-side[opened]")&&n&&n.removeAttribute("opened")}))}function bMenu(){document.addEventListener("click",(function(e){if(title=e.target.closest("[bx-title]")){let e=title.parentNode.hasAttribute("autoclose"),t=title.parentNode.querySelectorAll("[bx-title]"),n=title.parentNode.querySelectorAll("[bx-content]"),r=title.nextElementSibling;e&&t&&n&&(t.forEach((e=>{e!=title&&e.removeAttribute("active")})),n.forEach((e=>{e!=r&&(e.style.maxHeight=null)}))),title.setAttribute("active",""),r.hasAttribute("bx-content")&&(r.style.maxHeight?(r.style.maxHeight=null,title.removeAttribute("active")):r.style.maxHeight=r.scrollHeight+"px")}}))}function boxyCode(){let e=document.querySelectorAll("[code]");if(e){const t=document.createElement("span");t.innerHTML=svg,t.classList.add("copy-icon"),e.forEach((e=>{let n=e.attributes.code.value;""!=n&&ajax_get("/data/"+n+".html",(function(n){const r=document.createTextNode(n),s=document.createElement("pre");s.appendChild(r),e.appendChild(s),w3CodeColor(e),e.appendChild(t)}))}))}}function copyCode(){document.addEventListener("click",(function(e){let t=e.target.closest("[code] .copy-icon");t&&appCopy(t.parentNode.children[0])}))}function appCopy(e){var t=document.createRange();t.selectNodeContents(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeRange(t)}function w3CodeColor(e,t){var n=t||"html",r=document.getElementById(e)||e,s=r.innerHTML,o="#0dcaf0",l="black";function a(e,t,n,r,s){for(var o,l,a="",i=[];e.search(t)>-1;)o=e.search(t),-1==(l=e.indexOf(n,o))&&(l=e.length),s?(i.push(r(e.substring(o,l+n.length))),e=e.substring(0,o)+s+e.substr(l+n.length)):(a+=e.substring(0,o),a+=r(e.substring(o,l+n.length)),e=e.substr(l+n.length));this.rest=a+e,this.arr=i}function i(e){for(var t,n,r,s=e,l="";s.search(/(\s|<br>)/)>-1;)t=s.search(/(\s|<br>)/),-1==(n=s.indexOf("&gt;"))&&(n=s.length),l+=s.substring(0,t),l+=c(s.substring(t,n)),s=s.substr(n);return"&gt;"==(r="<span style=color:"+o+">&lt;</span>"+(r=l+s).substring(4)).substr(r.length-4,4)&&(r=r.substring(0,r.length-4)+"<span style=color:"+o+">&gt;</span>"),"<span style=color:#eb6b06>"+r+"</span>"}function c(e){for(var t,n,r,s,o,l=e,a="";l.indexOf("=")>-1;)n=-1,t=l.indexOf("="),r=l.indexOf("'",t),s=l.indexOf('"',t),(o=l.indexOf(" ",t+2))>-1&&(o<r||-1==r)&&(o<s||-1==s)?n=l.indexOf(" ",t):s>-1&&(s<r||-1==r)&&(s<o||-1==o)?n=l.indexOf('"',l.indexOf('"',t)+1):r>-1&&(r<s||-1==s)&&(r<o||-1==o)&&(n=l.indexOf("'",l.indexOf("'",t)+1)),(!n||-1==n||n<t)&&(n=l.length),a+=l.substring(0,t),a+=u(l.substring(t,n+1)),l=l.substr(n+1);return"<span style=color:#c58dff>"+a+l+"</span>"}function u(e){return"<span style=color:#ffff00>"+e+"</span>"}function d(e){return"<span style=color:green>"+e+"</span>"}function b(e){var t,n,r,s,o,l,i,c=e,u="";for(c=(r=new a(c,/\/\*/,"*/",d,"W3CSSCOMMENTPOS")).rest;c.search("{")>-1;){for(t=c.search("{"),o=c.substr(t+1),i=1,l=0,s=0;s<o.length&&("{"==o.substr(s,1)&&(i++,l++),"}"==o.substr(s,1)&&i--,0!=i);s++);for(0!=i&&(l=0),n=t,s=0;s<=l;s++)n=c.indexOf("}",n+1);-1==n&&(n=c.length),u+=c.substring(0,t+1),u+=g(c.substring(t+1,n)),c=c.substr(n)}for(c=(c=(c=u+c).replace(/{/g,"<span style=color:black>{</span>")).replace(/}/g,"<span style=color:black>}</span>"),s=0;s<r.arr.length;s++)c=c.replace("W3CSSCOMMENTPOS",r.arr[s]);return"<span style=color:brown>"+c+"</span>"}function g(e){var t,n,r,s,o=e,l="";if(o.indexOf("{")>-1)return b(o);for(;o.search(":")>-1;){for(s=!0,r=t=o.search(":");1==s;)s=!1,n=o.indexOf(";",r),"&nbsp;"==o.substring(n-5,n+1)&&(s=!0,r=n+1);-1==n&&(n=o.length),l+=o.substring(0,t),l+=f(o.substring(t,n+1)),o=o.substr(n+1)}return"<span style=color:red>"+l+o+"</span>"}function f(e){var t,n=e,r="";for(n="<span style=color:black>:</span>"+n.substring(1);n.search(/!important/i)>-1;)t=n.search(/!important/i),r+=n.substring(0,t),r+=h(n.substring(t,t+10)),n=n.substr(t+10);return result=r+n,";"==result.substr(result.length-1,1)&&"&nbsp;"!=result.substr(result.length-6,6)&&"&lt;"!=result.substr(result.length-4,4)&&"&gt;"!=result.substr(result.length-4,4)&&"&amp;"!=result.substr(result.length-5,5)&&(result=result.substring(0,result.length-1)+"<span style=color:"+l+">;</span>"),"<span style=color:mediumblue>"+result+"</span>"}function h(e){return"<span style=color:red;font-weight:bold;>"+e+"</span>"}function p(e){var t,n,r,s,o,l,a,i,c,u,b=e,g="",f=[],h="";for(t=0;t<b.length;t++)"\\"==(n=b.substr(t,1))&&(f.push(b.substr(t,2)),n="W3JSESCAPE",t++),h+=n;for(b=h,1;r=S(b,"'","'",v),s=S(b,'"','"',v),o=S(b,/\/\*/,"*/",d),l=S(b,/\/\//,"<br>",d),i=A(b,y),a=w("js",b,m),u=C(b,x),-1!=Math.max(i[0],r[0],s[0],o[0],l[0],a[0],u[0])&&-1!=(c=O(i,r,s,o,l,a,u))[0];)c[0]>-1&&(g+=b.substring(0,c[0]),g+=c[2](b.substring(c[0],c[1])),b=b.substr(c[1]));for(b=g+b,t=0;t<f.length;t++)b=b.replace("W3JSESCAPE",f[t]);return"<span style=color:black>"+b+"</span>"}function v(e){return"<span style=color:brown>"+e+"</span>"}function m(e){return"<span style=color:mediumblue>"+e+"</span>"}function y(e){return"<span style=color:red>"+e+"</span>"}function x(e){return"<span style=color:black>"+e+"</span>"}function C(e,t){var n,r,s,o,l=[".","<"," ",";","(","+",")","[","]",",","&",":","{","}","/","-","*","|","%"];if((o=e.indexOf("."))>-1)for(n=e.substr(o+1),s=0;s<n.length;s++)for(cc=n[s],r=0;r<l.length;r++)if(cc.indexOf(l[r])>-1)return[o+1,s+o+1,t];return[-1,-1,t]}function O(){var e,t=[];for(e=0;e<arguments.length;e++)arguments[e][0]>-1&&(0==t.length||arguments[e][0]<t[0])&&(t=arguments[e]);return 0==t.length&&(t=arguments[e]),t}function w(e,t,n){var r,s,o,l,a=-1,i=-1;for("js"==e&&(r=["abstract","arguments","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","NaN","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]),s=0;s<r.length;s++)(o=t.indexOf(r[s]))>-1&&(l=/\W/g,t.substr(o+r[s].length,1).match(l)&&t.substr(o-1,1).match(l)&&o>-1&&(-1==a||o<a)&&(i=(a=o)+r[s].length));return[a,i,n]}function S(e,t,n,r){var s,o;return s=e.search(t),-1==(o=e.indexOf(n,s+n.length))&&(o=e.length),[s,o+n.length,r]}function A(e,t){var n,r,s,o,l,a=["<br>"," ",";","(","+",")","[","]",",","&",":","{","}","/","-","*","|","%","="],i=0;for(n=0;n<e.length;n++)for(r=0;r<a.length;r++)if((s=e.substr(n,a[r].length))==a[r]){if("-"==s&&("e"==e.substr(n-1,1)||"E"==e.substr(n-1,1)))continue;if(i<(o=n)&&(l=e.substring(i,o),!isNaN(l)))return[i,o,t];i=n+=a[r].length,n-=1;break}return[-1,-1,t]}r.style.fontFamily="Consolas,'Courier New', monospace",n||(n="html"),"html"==n&&(s=function(e){var t,n,r,s,o,l=e,c="";t=new a(l,"&lt;!--","--&gt;",d,"W3HTMLCOMMENTPOS"),l=t.rest;for(;l.indexOf("&lt;")>-1;)s="",n=l.indexOf("&lt;"),"&LT;STYLE"==l.substr(n,9).toUpperCase()&&(s="css"),"&LT;SCRIPT"==l.substr(n,10).toUpperCase()&&(s="javascript"),-1==(r=l.indexOf("&gt;",n))&&(r=l.length),c+=l.substring(0,n),c+=i(l.substring(n,r+4)),l=l.substr(r+4),"css"==s&&(r=l.indexOf("&lt;/style&gt;"))>-1&&(c+=b(l.substring(0,r)),l=l.substr(r)),"javascript"==s&&(r=l.indexOf("&lt;/script&gt;"))>-1&&(c+=p(l.substring(0,r)),l=l.substr(r));for(l=c+l,o=0;o<t.arr.length;o++)l=l.replace("W3HTMLCOMMENTPOS",t.arr[o]);return l}(s)),"css"==n&&(s=b(s)),"js"==n&&(s=p(s)),r.innerHTML=s}observer.observe(targetNode,config);
